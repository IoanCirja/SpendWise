<div class="container">
  <!-- Display current plan if available -->
  <mat-card class="plan-card" *ngIf="currentPlan">
    <mat-card-header>
      <mat-card-title>{{ currentPlan.plan_name }}</mat-card-title>
    </mat-card-header>
    <img mat-card-image [src]="currentPlan.image" alt="{{ currentPlan.plan_name }}">
    <mat-card-content>
      <p>{{ currentPlan.description }}</p>
      <p><strong>Total Amount:</strong> {{ currentPlan.totalAmount }}</p>
    </mat-card-content>
    <mat-card-actions>
      <button mat-raised-button color="warn" (click)="cancelPlan()">Cancel Your Current Plan</button>
    </mat-card-actions>
  </mat-card>

  <mat-card class="category-card" *ngIf="currentPlan">
    <mat-card-header>
      <mat-card-title>Categories</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="categories">
        <div *ngFor="let category of categoriesWithDetails" class="category-item">
          <button mat-button>{{ category.name }}</button>
          <div class="progress-circle">
            <mat-progress-spinner
              [value]="(category.spent / category.price) * 100"
              [color]="getCircleColor((category.spent / category.price) * 100)"
              mode="determinate">
            </mat-progress-spinner>
            <div class="percentage-text">{{ ((category.spent / category.price) * 100) | number: '1.0-0' }}%</div>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Display message and button if no current plan -->
  <div *ngIf="!currentPlan" class="no-plan-message">
    <p>No budget plan this month. Choose one <a [routerLink]="['/budget-plans']">here</a>.</p>
  </div>
</div>
